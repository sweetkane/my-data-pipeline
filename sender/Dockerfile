FROM public.ecr.aws/lambda/python:3.11

ARG OPENAI_API_KEY
ARG NEWS_API_KEY
ARG RAPID_API_KEY

ENV OPENAI_API_KEY ${OPENAI_API_KEY}
ENV NEWS_API_KEY ${NEWS_API_KEY}
ENV RAPID_API_KEY ${RAPID_API_KEY}

COPY sender ${LAMBDA_TASK_ROOT}

RUN pip install -r ${LAMBDA_TASK_ROOT}/requirements.txt

ENV PYTHONPATH "${PYTHONPATH}:${LAMBDA_TASK_ROOT}"

CMD [ "main.handler" ]
